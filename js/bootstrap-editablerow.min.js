(function(t){var e=function(e,a){var i=this,n=e.children("tbody"),r=e.children("thead"),s=r.clone();var d=[],l='<td width="30px"><a class="edit" href="javascript:;"><i class="glyphicon glyphicon-pencil"></i></a></td><td width="30px"><a class="delete" href="javascript:;"><i class="glyphicon glyphicon-trash"></i></a></td>',o='<td width="30px"><a class="save" href="javascript:;"><i class="glyphicon glyphicon-ok"></i></a></td><td width="30px"><a class="cancel" href="javascript:;"><i class="glyphicon glyphicon-remove"></i></a></td>';this.keepColsWidth=function(){if(d.length>0){r.find("th").each(function(){t(this).attr("width",t(this).outerWidth())})}};this.clearColsWidth=function(){if(d.length<1){r.find("th").attr("width",null)}};this.getRowData=function(e){var a=[];e.find("td").each(function(){a.push(t(this).text())});return a};this.getEditRowJson=function(t){var e={};var i=t.find("td");for(var n=0;n<a.columns.length;n++){var r=i.eq(n);var s=r.find("input");var d="";if(s.length>0){d=s.val()}else{d=r.text()}e[a.columns[n].name]=d}return e};this.addslashes=function(t){t=t.replace(/"/g,"&quot;");return t};this.getEditRowData=function(t){var e=i.getEditRowJson(t);var a=[];for(var n in e){a.push(e[n])}return a};this.buildColsHtml=function(t,e){var i=[];for(var n=0;n<a.columns.length;n++){var r="",s="",d="",h="";if(e&&e[n]){r=e[n]}r=this.addslashes(r);if(a.columns[n]){d=a.columns[n].type;h=a.columns[n].name}if(t=="edit"||t=="add"){switch(d){case"input":i.push('<td><input name="'+h+'" type="text" class="form-control small input-sm" value="'+r+'"></td>');break;default:i.push("<td>"+r+"</td>");break}}else{i.push("<td>"+r+"</td>")}}if(t=="add"||t=="edit"){i.push(o)}else if(t=="restore"||t=="save"){i.push(l)}return i.join("")};this.getAllData=function(){var e=[];n.find("tr").each(function(){var a=i.getEditRowJson(t(this));e.push(a)});return e};this.render=function(){r.html(s.html()).find("tr").append('<th width="30px"></th><th width="30px"></th>');n.find("tr").append(l)};this.addRow=function(){d.push(true);i.keepColsWidth();n.prepend('<tr data-editablerow-thisnew="true">'+i.buildColsHtml("add")+"</tr>")};n.on("click","a.edit",function(e){e.preventDefault();var a=t(e.target).parents("tr").eq(0);d.push(true);i.keepColsWidth();a.data("__editting",true);a.data("__data",i.getRowData(a));a.html(i.buildColsHtml("edit",a.data("__data")))}).on("click","a.cancel",function(e){e.preventDefault();var a=t(e.target).parents("tr").eq(0);d.pop();i.clearColsWidth();a.data("__editting",false);if(a.attr("data-editablerow-thisnew")){a.remove()}else{a.html(i.buildColsHtml("restore",a.data("__data")))}}).on("click","a.save",function(e){e.preventDefault();var n=t(e.target).parents("tr").eq(0);var r=i.getEditRowData(n);var s=i.getEditRowJson(n);a.save.callback&&a.save.callback(s);n.html(i.buildColsHtml("save",r));n.attr("data-editablerow-thisnew",null)}).on("click","a.delete",function(e){e.preventDefault();var n=t(e.target).parents("tr").eq(0);var r=i.getEditRowJson(n);if(a.destroy.before(r)){n.remove()}})};t.fn.editablerow=function(a){if(a){a=t.extend(true,{save:{dataType:"json"},destroy:{before:function(){return true}}},a)}else{return this.data("editablerow")}this.each(function(){var i=t(this);if(!i.data("editablerow"))i.data("editablerow",new e(i,a))});return this}})(window.jQuery);