jQuery.noConflict();(function(e){var t={interval:1e3,enableEffect:true};const n=window.location.href;var r=e(document);function a(e,t,n){n=n||"yellow";console.group("%c"+e+":","background:"+n+";");console.log(t);console.groupEnd()}function o(e){try{return r.xpath(e)}catch(t){t.xpath=e;a("XPath语法错误",t);return null}}function l(t,n){var r=t.offset().top;var a=t.offset().left;var o=e("<div class='chrome-plugin-autobrush-effect chrome-plugin-autobrush-effect-boris' style='position:absolute;top:"+r+"px;left:"+a+"px;'></div>").appendTo("body");setTimeout(function(){o.remove()},1e3)}function c(e,t,n){var r=t.split(".");for(var a=0;a<r.length-1;a++){e=e[r[a]]}e[r[r.length-1]]=n}function u(r){var u=e(document.activeElement);a("当前焦点元素",u.eq(0)||null);a("获取规则数据",r);for(var f in r){var i=r[f];var s=i.url;s=s.replace(/\./g,"\\.");s=s.replace(/\*/g,"[a-zA-Z_-]*");s="^"+s;var v=new RegExp(s);if(v.exec(n)){a("URL匹配成功",n);if(i.focus!=""&&o(i.focus)&&!o(i.focus).is(u)){a("Focus匹配失败",i.focus);continue}var p=i.content;p=p.reverse();var h=0;var g=setInterval(function(){if(h>=p.length){clearInterval(g);return false}var n=p[h];if(n.value=="{click}"){var r=o(n.selector);if(r){r.each(function(){a("点击元素",this);t.enableEffect&&l(e(this));this.click()})}}else{var u=o(n.selector);if(u&&u.length>0&&u[0]!==false){a("填充元素",n);u.val(n.value);t.enableEffect&&l(u);if(angular){var f=u.attr("data-ng-model");if(f){a("Angular绑定",f);var i=u[0];var s=angular.element(i).scope();c(s,f,n.value)}}}else{a("没有找到填充元素",n,"red")}}h++},t.interval)}}}function f(e){if(e.shiftKey==true&&e.key=="Enter"){console.clear();a("按下了激活键",e.key);a("当前的URL",n);var t=document.getElementById("chrome_plugin_autobrush_data").innerText;t=JSON.parse(t);u(t.roles)}}r.keypress(f)})(window.jQuery);